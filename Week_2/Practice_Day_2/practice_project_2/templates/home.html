{%extends 'base.html'%}

{% block content%}

<h1 class="text-3xl font-bold pb-8">All Data</h1>



<div class="w-full">
    <div class="container mx-auto px-2">
        <div class="overflow-x-auto">
            <table class="min-w-full divide-y divide-gray-200 bg-white shadow-md rounded-lg">
                <thead class="bg-gray-100">
                    <tr>
                        <th scope="col" class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                            ID
                        </th>
                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                            Musician Name
                        </th>
                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                            Email
                        </th>
                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                            Album Rating
                        </th>
                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                            Instrument Type
                        </th>
                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                            Album Name
                        </th>
                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                            Release Date
                        </th>
                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                            Actions
                        </th>
                    </tr>
                </thead>
                <tbody class="divide-y divide-gray-200">
                   
                    <!--   Rows -->

                    {% for user in data%}
                    <tr>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                            {{forloop.counter }}
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                            {{user.first_name}}
                             {{user.last_name}}
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                            {{user.email}}
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                            {% for album in albums%}
                                {% if album.musician.first_name == user.first_name %}
                                    {{album.instrument_type}} |
                                {% endif %} 
                            {%endfor%} 
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                            {{user.instrument_type}}
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                         
                            {% for album in albums %}
                                {% if album.musician.first_name == user.first_name %}
                                    {{ album.album_name }} |  
                                {%endif%}
                            {%endfor%}
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                            {% for album in albums%}
                                {% if album.musician.first_name == user.first_name %}
                                    {{album.release_date}} |
                                {% endif %} 
                            {%endfor%} 
                        </td>

                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                            <a href="{% url 'edit' user.id%}" class="text-blue-600 hover:text-blue-800">Edit</a>
                            <span class="mx-2">|</span>
                            <a href="{% url 'delete' user.id%}" class="text-red-600 hover:text-red-800">Delete</a>
                        </td>
                        
                    </tr>

                    {%endfor%}
                    
                </tbody>
            </table>
        </div>
    </div>    

</div> 
{% endblock %}